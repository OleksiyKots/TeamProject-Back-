{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}AtletiQ{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'main/css/main.css' %}">
</head>
<body style="background-color: #ffffff;">

    <header style="position: relative; height: 60px; border-bottom: 1px solid #ccc;">
        <!-- –ù–∞–∑–≤–∞ —Å–∞–π—Ç—É –ª—ñ–≤–æ—Ä—É—á -->
        <div style="position: absolute; top: 50%; left: 20px; transform: translateY(-50%);">
            <a href="{% url 'home' %}" style="text-decoration: none; font-weight: bold; font-size: 24px; color: black;">
                AtletiQ
            </a>
        </div>
    
        <!-- –ö–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞ -->
        <!-- –ö–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞ -->
<div style="position: absolute; top: 50%; right: 20px; transform: translateY(-50%); display: flex; gap: 10px;">

    <button id="favorites-button" type="button">‚ù§Ô∏è</button>

    <!-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é -->
    {% if user.is_authenticated %}
        {% if request.path == '/user/' %}
            <!-- –Ø–∫—â–æ –º–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –ø—Ä–æ—Ñ—ñ–ª—é -->
            <form method="post" action="{% url 'logout' %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit">–í–∏–π—Ç–∏</button>
            </form>
        {% else %}
            <!-- –Ø–∫—â–æ –º–∏ –Ω–µ –Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—ñ -->
            <a href="{% url 'user' %}">üë§</a>
        {% endif %}
    {% else %}
        <!-- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π -->
        <a href="{% url 'login' %}">üë§</a>
    {% endif %}

</div>

    </header>
    

<main style="padding: 20px;">
    {% block content %}
    {% endblock %}
</main>

<footer style="text-align: center; padding: 20px; border-top: 1px solid #ccc;">
    &copy; 2025 AtletiQ
</footer>

{% block scripts %}

<script>
    const isAuthenticated = "{{ user.is_authenticated|yesno:'true,false' }}";
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const favoritesButton = document.getElementById('favorites-button');

    favoritesButton.addEventListener('click', function() {
        if (isAuthenticated === "true") {
            window.location.href = "{% url 'favorites_list' %}";
        } else {
            if (confirm("–©–æ–± –¥–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ, –ø–æ—Ç—Ä—ñ–±–Ω–æ —É–≤—ñ–π—Ç–∏ –∞–±–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è.\n\n–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å OK –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—Ö–æ–¥—É.")) {
                window.location.href = "{% url 'login' %}";
            }
        }
    });
});

</script>
{% endblock %}
</body>
</html>
